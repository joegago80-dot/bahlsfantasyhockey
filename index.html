<script>
    // Change this to your GitHub Pages JSON file
    const PIPELINE_URL = "https://joegago80-dot.github.io/bahlsfantasyhockey/fantasyData.json";

    async function fetchStandings() {
        try {
            const response = await fetch(PIPELINE_URL);
            if (!response.ok) throw new Error("Failed to fetch JSON: " + response.status);
            const data = await response.json();

            // Pull standings from the GitHub-hosted JSON
            const standings = data?.standings?.Standings;
            if (!standings || !Array.isArray(standings)) {
                throw new Error("Standings data not found or invalid format");
            }

            // Sort by points descending, then wins descending
            standings.sort((a, b) => {
                if (b.points !== a.points) return b.points - a.points;
                return b.wins - a.wins;
            });

            const tbody = document.querySelector("#standingsTable tbody");
            tbody.innerHTML = "";

            standings.forEach(team => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${team.name}</td>
                    <td>${team.wins}</td>
                    <td>${team.losses}</td>
                    <td>${team.ties}</td>
                    <td>${team.points}</td>
                `;
                tbody.appendChild(row);
            });

        } catch (err) {
            console.error(err);
            const tbody = document.querySelector("#standingsTable tbody");
            tbody.innerHTML = `<tr><td colspan="5">Error loading standings: ${err.message}</td></tr>`;
        }
    }

    fetchStandings();
</script>
